#include"../../include/fast_io.h"
#include"../../include/fast_io_device.h"
#include<algorithm>
#include<string_view>

int main()
try
{
	fast_io::ibuf ib("Arctium WoW Retail Launcher.DMP");
	std::string str;
	getwhole(ib,str);
	using namespace std::string_view_literals;
	{
	constexpr auto needle("chrraces.db2"sv);
	auto it(search(str.cbegin(),str.cend(),std::boyer_moore_horspool_searcher(needle.begin(), needle.end())));
	if(it==str.cend())
	{
		println(fast_io::err,needle,u8" not found");
		return 1;
	}
	println(fast_io::out,u8"chrraces.db2:\tpos:",it-str.cbegin(),u8"\ttotal:",str.size(),u8"\t(",static_cast<double>((it-str.cbegin())*100)/str.size(),u8"%)");
	}
	{
	constexpr auto needle("creaturedisplayinfoextra.db2"sv);
	auto it(search(str.cbegin(),str.cend(),std::boyer_moore_horspool_searcher(needle.begin(), needle.end())));
	if(it==str.cend())
	{
		println(fast_io::err,needle,u8" not found");
		return 1;
	}
	println(fast_io::out,u8"creaturedisplayinfoextra.db2:\tpos:",it-str.cbegin(),u8"\ttotal:",str.size(),u8"\t(",static_cast<double>((it-str.cbegin())*100)/str.size(),u8"%)");
	}
}
catch(std::exception const& e)
{
	println(fast_io::err,e);
	return 1;
}